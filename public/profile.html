<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Profil Saya - RinsPoint</title>
    
    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#0F172A">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        /* UI KHUSUS PROFIL */
        .profile-header {
            background: linear-gradient(135deg, #0F172A 0%, #1E293B 100%);
            padding: 2rem 1.5rem;
            text-align: center;
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 2rem;
        }

        .avatar-circle {
            width: 80px; height: 80px;
            background: #4ADE80;
            color: #064E3B;
            font-size: 2.5rem;
            font-weight: 700;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            margin: 0 auto 1rem auto;
            border: 4px solid rgba(255,255,255,0.1);
        }

        .user-name { color: white; font-size: 1.2rem; font-weight: 700; margin-bottom: 0.2rem; }
        .user-phone { color: #94a3b8; font-size: 0.9rem; }

        .menu-list { padding: 0 1.5rem; }
        .menu-item {
            background: #1E293B;
            padding: 1rem;
            border-radius: 12px;
            display: flex; align-items: center;
            margin-bottom: 10px;
            text-decoration: none;
            color: white;
            border: 1px solid rgba(255,255,255,0.05);
            transition: 0.2s;
        }
        .menu-item:active { transform: scale(0.98); background: #334155; }
        .menu-item i { width: 30px; font-size: 1.2rem; color: #4ADE80; }
        .menu-item span { flex: 1; font-size: 0.95rem; }

        /* Style Khusus Tombol Admin */
        .menu-item.admin-link {
            border: 1px solid rgba(74, 222, 128, 0.3);
            background: rgba(74, 222, 128, 0.05);
        }
        .menu-item.admin-link i { color: #FACC15; } /* Ikon Kuning Emas */

        .btn-logout {
            width: 100%;
            padding: 15px;
            background: rgba(239, 68, 68, 0.1);
            color: #EF4444;
            border: 1px solid rgba(239, 68, 68, 0.2);
            border-radius: 12px;
            font-weight: 700;
            margin-top: 2rem;
            cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .btn-logout:active { background: rgba(239, 68, 68, 0.2); }
    </style>

    <script>
        // SCRIPT PROTEKSI
        function checkLogin() {
            const user = JSON.parse(localStorage.getItem('rinsUser'));
            if (!user || !user.isLoggedIn) {
                window.location.replace('/login-pelanggan.html');
            }
        }
        checkLogin();
    </script>
</head>
<body>

    <div class="mobile-container">
        
        <div class="profile-header">
            <div class="avatar-circle" id="avatarInitial">U</div>
            <h2 class="user-name" id="userName">Memuat...</h2>
            <p class="user-phone" id="userPhone">...</p>
        </div>

        <div class="menu-list">
            
            <a href="cart.html" class="menu-item">
                <i class="fa-solid fa-cart-shopping"></i>
                <span>Keranjang Belanja</span>
                <i class="fa-solid fa-chevron-right" style="width:auto; color:#64748b; font-size:0.8rem;"></i>
            </a>
            
            <a href="#" class="menu-item" onclick="alert('Fitur Riwayat Pesanan akan segera hadir!')">
                <i class="fa-solid fa-clock-rotate-left"></i>
                <span>Riwayat Pesanan</span>
                <i class="fa-solid fa-chevron-right" style="width:auto; color:#64748b; font-size:0.8rem;"></i>
            </a>

            <a href="https://wa.me/6281234567890" target="_blank" class="menu-item">
                <i class="fa-solid fa-headset"></i>
                <span>Hubungi Admin</span>
                <i class="fa-solid fa-chevron-right" style="width:auto; color:#64748b; font-size:0.8rem;"></i>
            </a>

            <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 15px 0;"></div>

            <a href="/login.html" class="menu-item admin-link">
                <i class="fa-solid fa-user-shield"></i>
                <span>Masuk Mode Admin</span>
                <i class="fa-solid fa-arrow-up-right-from-square" style="width:auto; color:#FACC15; font-size:0.8rem;"></i>
            </a>

            <button class="btn-logout" onclick="doLogout()">
                <i class="fa-solid fa-right-from-bracket"></i> Keluar Aplikasi
            </button>
            
            <p style="text-align: center; color: #475569; font-size: 0.7rem; margin-top: 2rem;">
                Versi Aplikasi 1.0.0
            </p>
        </div>

        <nav class="bottom-nav">
            <a href="/"><i class="fa-solid fa-house"></i><span>Beranda</span></a>
            <a href="/ppob.html"><i class="fa-solid fa-bolt"></i><span>PPOB</span></a>
            <a href="cart.html" style="position: relative;">
                <i class="fa-solid fa-cart-shopping"></i>
                <span>Troli</span>
                <span class="cart-badge-fixed" id="cartBadge">0</span>
            </a>
            <a href="profile.html" class="active"><i class="fa-solid fa-user"></i><span>Profil</span></a>
        </nav>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // TAMPILKAN DATA USER
            const user = JSON.parse(localStorage.getItem('rinsUser'));
            if(user) {
                document.getElementById('userName').innerText = user.name;
                document.getElementById('userPhone').innerText = user.phone;
                document.getElementById('avatarInitial').innerText = user.name.charAt(0).toUpperCase();
            }

            // BADGE TROLI
            const cart = JSON.parse(localStorage.getItem('rinsCart')) || [];
            const badge = document.getElementById('cartBadge');
            if (badge && cart.length > 0) {
                badge.innerText = cart.length;
                badge.classList.add('show');
            }
        });

        // FUNGSI LOGOUT
        function doLogout() {
            if(confirm('Yakin ingin keluar dari aplikasi?')) {
                localStorage.removeItem('rinsUser');
                window.location.replace('/login-pelanggan.html');
            }
        }
    </script>
</body>
</html>